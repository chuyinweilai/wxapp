<!--pages/qa/question.wxml-->
<import src="/ascx/head.wxml" />
<template is="headnav" data="{{title:'·我要提问',slogon:'noslogon',fillHeight:fillHeight}}" />

<block wx-if="{{hasUserInfo==false}}">
  <include src='/ascx/userinfo.wxml'/>
</block>

<view class='qa_question_view'>
  <form bindsubmit='postQaQuestion' report-submit='true'>
  
    <view class='qa_question_main'>
        <view class='qa_question_type'>
          <view class='qa_question_typetitle'>
            <picker bindchange="bindPickerChange" value="{{pickerindex}}" range-key='name' range="{{pickeobjrarray}}">
              <view class="qa_question_typetitleword">
                选择问题类型：<text class='qa_question_typevalue'>{{pickeobjrarray[pickerindex].name}}</text>
              </view>
            </picker>
          </view>
          <view class='qa_question_typeclick'>></view>
        </view>
        <view class='qa_question_contact'>
          {{contactinfo!=''?'联系方式：':''}}
          <input class='qa_question_contactinput' placeholder='填写邮箱/手机号 以便我们及时通知您问题动态' value="{{contactinfo}}" bindinput='inputContactInfo' cursor-spacing='650rpx'></input>
        </view>
        <view class='qa_question_title'>
          <input class='qa_question_titleinput' placeholder='输入提问标题' value="{{qatitle}}" bindinput='inputQaTitle' cursor-spacing='550rpx'></input>
        </view>
        <view class="qa_question_content{{hasUserInfo==false?' display':''}}">
          <textarea class='qa_question_contentinput' placeholder='输入提问内容' value="{{qacontent}}" bindinput='inputQaContent' bindconfirm='confirmPostQuestion' cursor-spacing='440rpx'></textarea>
        </view>
    </view>

    <block wx-if="{{hasUserInfo!=false}}">

      <view class="functionupload_image_view">
        <view class='functionupload_image_group' wx:for="{{imagePaths}}" data-index='index' wx:key='imagePaths'>
          <view class='functionupload_image_picture'>
            <image class='functionupload_img' mode='aspectFill' src="{{item}}"></image>
          </view>
          <view class='functionupload_image_remove' bindtap='removeImage' data-idx="{{index}}">X</view>
        </view>
      </view>
      <view class="audio_function_mainview{{hasRecord=='none'?'display':''}}">
        <view class='audio_function_text' bindtap="{{audiostatus}}">
          <image class='audio_function_play' src="../../images/icon/icon_audio{{isAudioPlay=='yes'?'on':''}}play.png"></image>
          <view class="audio_function_duration" style="width:{{20+audioDuration*4}}rpx;">{{audioDuration}}'</view>
        </view>
        <view class='audio_function_clearbtn' bindtap="clearAudio">x</view>
      </view>
      <view class="video_funcition_view{{videosrc==''||videosrc==null?' display':''}}">
        <video class='video_function_main' src="{{videosrc}}"></video>
      </view>

      <view class='upload_button_function'>
        <view class='upload_function_button'>
          <view class='upload_function_audio' bindtap="{{audiofunction}}">
            <image src="../../images/icon/icon_audio{{audiofunction=='stopRecordAudio'?'_recording':''}}.jpg" class='upload_function_audio_functionimg'></image>
          </view>
          <view class='upload_function_picture' bindtap='uploadImage'>
            <image src='../../images/icon/icon_picture.jpg' class='upload_function_pictureimg'></image>
          </view>
          <view class='upload_function_video' bindtap='uploadVideo'>
            <image src='../../images/icon/icon_video.jpg' class='upload_function_videoimg'></image>
          </view>
        </view>
        <view class='upload_function_post'>
          <view class="qa_function_anonymous{{switchvalue==true?'selected':''}}">
            <switch color='#ff6900' checked="{{switchvalue}}" bindchange='switchAnonymous'></switch>
            <view class='qa_function_anonymoustitle' data-value="{{switchvalue==true?false:true}}" bindtap='bindAnonymouse'>匿名</view>
          </view>
          <!-- <view class='qa_function_confirm' bindtap='confirmPostQuestion'>确认提交</view> -->
          <view class='upload_function_confirm'>
            <button class='qa_function_sumbit' form-type="submit">确认提交</button>
          </view>
        </view>
      </view>

    </block>

  </form>
</view>